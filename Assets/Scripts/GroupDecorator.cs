using System.Collections;
using System.Collections.Generic;
using TMPro;
using UnityEngine;

public class GroupDecorator : Decorator
{
    [SerializeField] private TMP_Text groupCount;
    [SerializeField] private TMP_Text animalCount;
    [SerializeField] private Transform childRoot;

    private Group agGroup;

    private List<Decorator> children = new List<Decorator>();

    public void Initialize(IGroupable g, GroupDisplayManager manager)
    {
        Group = g;
        agGroup = g as Group;
        base.Initialize(manager);
        Refresh();
    }

    public override void Refresh()
    {
        groupCount.text = "Groups " + agGroup.GetGroupCount();
        animalCount.text = "Animals " + agGroup.GEtItemCount();
        costDisplay.text = "$" + agGroup.GetValue();

        foreach(Decorator gd in children)
        {
            Destroy(gd.gameObject);
        }
        children.Clear();
        foreach(IGroupable group in agGroup.GetSubGroups())
        {
            children.Add(displayManager.DecoratorFactory(group, childRoot));
        }
        foreach(Decorator gd in children)
        {
            gd.Refresh();
        }
       
    }


}   
